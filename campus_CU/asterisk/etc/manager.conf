[general]
enabled = yes
port = 5038
bindaddr = 0.0.0.0
webenabled = yes

; Affiche les connexions/déconnexions (utile pour debug Rocket.Chat)
displayconnects = yes

; Ajoute un timestamp aux logs
timestampevents = yes

; Sécurité : évite les logins simultanés
allowmultiplelogin = no

; Maintient la connexion ouverte pour Rocket.Chat (évite timeout)
persistentconnections = yes

; ========== UTILISATEUR DÉDIÉ À ROCKET.CHAT ==========

[rocketchat]
secret = VOTRE_MOT_DE_PASSE_AMI_TRES_SECURISE

; Bloque tout le trafic par défaut
deny = 0.0.0.0/0.0.0.0

; Autorise seulement Rocket.Chat et éventuellement vos outils locaux
permit = 172.20.0.0/16

read = system,call,log,verbose,command,agent,user,config,dtmf,reporting,cdr,dialplan

write = system,call,log,verbose,command,agent,user,config,dtmf,reporting,cdr,dialplan

; Facilité : pour debug massif à la demande, vous pouvez temporairement utiliser
; read = all
; write = all

eventfilter = !Event: RTCP*
eventfilter = !Event: VarSet
eventfilter = !Event: HangupRequest
eventfilter = !Event: NewExten
eventfilter = !Event: NewState

; ========== TIP SUPPLÉMENTAIRE ==========
; Si vous voulez permettre l’accès AMI pour un softphone SIP local ou un outil d’admin :
; [admin]
; secret = UN_MOT_DE_PASSE_ADMIN
; permit = 172.20.0.0/16
; read = all
; write = all
; eventfilter = !Event: RTCP*

; ========== LOGS MANAGER ENVOYÉS VERS LA CONSOLE ==========
; Ajoutez dans logger.conf :
; console => notice,warning,error
; messages => notice,warning,error
; full => notice,warning,error,debug,verbose

